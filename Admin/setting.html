<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ONNO ROKOM BIDDYANIKETON - সেটিংস</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    
    <!-- Cloudinary Widget -->
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
    
    <style>
        :root {
            --primary-color: #008779;
            --primary-dark: #00695c;
            --secondary-accent: #ffc107;
            --background-color: #f0f4f8;
            --sidebar-bg: #1f2937;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--background-color);
        }

        .primary-bg { background-color: var(--primary-color); }
        .primary-text { color: var(--primary-color); }
        .primary-hover:hover { background-color: var(--primary-dark); }
        .accent-bg { background-color: var(--secondary-accent); }
        .accent-text { color: var(--secondary-accent); }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .tab-button {
            transition: all 0.3s ease;
        }
        
        .tab-button.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .tab-button:hover:not(.active) {
            background-color: #e5e7eb;
            color: var(--primary-color);
        }
        
        .image-preview {
            max-height: 200px;
            object-fit: cover;
        }
        
        .drag-drop-area {
            border: 2px dashed #cbd5e0;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .drag-drop-area.dragover {
            border-color: var(--primary-color);
            background-color: rgba(0, 135, 121, 0.05);
        }
        
        .cloudinary-image {
            transition: all 0.3s ease;
        }
        
        .cloudinary-image:hover {
            transform: scale(1.05);
        }
        
        .image-actions {
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .image-container:hover .image-actions {
            opacity: 1;
        }
        
        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .popup-content {
            background: white;
            border-radius: 0.5rem;
            padding: 2rem;
            max-width: 90%;
            width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .hover-effect {
            transition: all 0.3s ease;
        }
        
        .hover-effect:hover {
            background-color: #f3f4f6;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background-color: #6b7280;
            color: white;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            background-color: #4b5563;
            transform: translateY(-1px);
        }
    </style>
</head>

<body class="min-h-screen flex flex-col">
<section class="hide" style="display:none">
    <header class="primary-bg text-white shadow-lg sticky top-0 z-50">
        <div class="bg-black bg-opacity-10 py-2 text-xs hidden md:block">
            <div class="container mx-auto px-4 flex justify-end space-x-6">
                <span class="flex items-center"><i class="fas fa-phone mr-2 accent-text"></i> +880 1712-345678</span>
                <span class="flex items-center"><i class="fas fa-envelope mr-2 accent-text"></i> info@onnorokom.edu</span>
            </div>
        </div>
        
        <nav class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fas fa-graduation-cap text-3xl accent-text"></i>
                <a href="home.html" class="text-xl font-black">ONNO ROKOM BIDDYANIKETON</a>
            </div>

            <ul class="hidden md:flex space-x-6 text-sm font-semibold">
                <li><a href="home.html" class="py-2 hover:border-b-2 hover:border-yellow-500">হোম</a></li>
                <li><a href="#" class="py-2 hover:border-b-2 hover:border-yellow-500">আমাদের সম্পর্কে</a></li>
                <li><a href="#" class="py-2 hover:border-b-2 hover:border-yellow-500">একাডেমিক</a></li>
                <li><a href="all-notice.html" class="py-2 hover:border-b-2 hover:border-yellow-500">নোটিশ</a></li>
                <li><a href="#" class="py-2 hover:border-b-2 hover:border-yellow-500">গ্যালারি</a></li>
                <li><a href="#" class="py-2 hover:border-b-2 hover:border-yellow-500">যোগাযোগ</a></li>
                <li>
                    <a href="setting.html" class="py-2 border-b-2 border-yellow-500">সেটিংস</a>
                </li>
                <li>
                    <a href="../Auth/login.html" class="accent-bg text-black px-4 py-2 rounded-lg ml-2 hover:bg-yellow-600 transition">
                        লগআউট
                    </a>
                </li>
            </ul>

            <button id="mobile-menu-button" class="md:hidden text-2xl">
                <i class="fas fa-bars"></i>
            </button>
        </nav>

        <div id="mobile-menu" class="hidden md:hidden absolute w-full bg-white text-gray-800 shadow-xl">
            <ul class="flex flex-col p-4 text-base">
                <li><a href="home.html" class="block py-2 hover:bg-gray-100 px-4">হোম</a></li>
                <li><a href="#" class="block py-2 hover:bg-gray-100 px-4">আমাদের সম্পর্কে</a></li>
                <li><a href="#" class="block py-2 hover:bg-gray-100 px-4">একাডেমিক</a></li>
                <li><a href="all-notice.html" class="block py-2 hover:bg-gray-100 px-4">নোটিশ</a></li>
                <li><a href="#" class="block py-2 hover:bg-gray-100 px-4">গ্যালারি</a></li>
                <li><a href="#" class="block py-2 hover:bg-gray-100 px-4">যোগাযোগ</a></li>
                <li><a href="setting.html" class="block py-2 border-l-4 border-yellow-500 px-4 bg-gray-100">সেটিংস</a></li>
                <li><a href="../Auth/login.html" class="block mt-2 text-center primary-bg text-white py-2 rounded-lg primary-hover">লগআউট</a></li>
            </ul>
        </div>
    </header>
</section>
    <main class="flex-1 py-8">
        <div class="container mx-auto px-4">
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="primary-bg text-white p-6">
                    <h1 class="text-3xl font-bold flex items-center">
                        <i class="fas fa-cog mr-3 accent-text"></i> 
                        অ্যাডমিন সেটিংস প্যানেল
                    </h1>
                    <p class="mt-2 text-gray-200">এখান থেকে আপনি ওয়েবসাইটের সকল তথ্য আপডেট, এডিট এবং ডিলিট করতে পারবেন</p>
                </div>
                
                <!-- Tab Navigation -->
                <div class="border-b">
                    <div class="flex overflow-x-auto">
                        <button class="tab-button py-4 px-6 font-medium text-gray-600 active" data-tab="hero">
                            <i class="fas fa-image mr-2"></i> হিরো সেকশন
                        </button>
                        <button class="tab-button py-4 px-6 font-medium text-gray-600" data-tab="principal">
                            <i class="fas fa-user-tie mr-2"></i> প্রধান শিক্ষক
                        </button>
                        <button class="tab-button py-4 px-6 font-medium text-gray-600" data-tab="statistics">
                            <i class="fas fa-chart-bar mr-2"></i> পরিসংখ্যান
                        </button>
                        <button class="tab-button py-4 px-6 font-medium text-gray-600" data-tab="programs">
                            <i class="fas fa-book-open mr-2"></i> প্রোগ্রাম
                        </button>
                        <button class="tab-button py-4 px-6 font-medium text-gray-600" data-tab="notices">
                            <i class="fas fa-bullhorn mr-2"></i> নোটিশ
                        </button>
                        <button class="tab-button py-4 px-6 font-medium text-gray-600" data-tab="marquee">
                            <i class="fas fa-scroll mr-2"></i> স্ক্রলিং নোটিশ
                        </button>
                        <button class="tab-button py-4 px-6 font-medium text-gray-600" data-tab="gallery">
                            <i class="fas fa-images mr-2"></i> গ্যালারি
                        </button>
                        <button class="tab-button py-4 px-6 font-medium text-gray-600" data-tab="contact">
                            <i class="fas fa-address-book mr-2"></i> যোগাযোগ
                        </button>
                    </div>
                </div>
                
                <!-- Tab Contents -->
                <div class="p-6">
                    
                    <!-- Hero Section Tab -->
                    <div id="hero-tab" class="tab-content active">
                        <h2 class="text-2xl font-bold mb-6 primary-text">হিরো সেকশন ম্যানেজমেন্ট</h2>
                        
                        <form id="hero-form" class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">হিরো টাইটেল</label>
                                    <input type="text" id="hero-title" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" placeholder="হিরো সেকশনের টাইটেল">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">হিরো ডেসক্রিপশন</label>
                                    <textarea id="hero-description" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" placeholder="হিরো সেকশনের বর্ণনা"></textarea>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">হিরো ব্যাকগ্রাউন্ড ইমেজ</label>
                                
                                <div class="mb-4">
                                    <button type="button" id="upload-hero-image" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                                        <i class="fas fa-cloud-upload-alt mr-2"></i> ক্লাউডিনারি থেকে ইমেজ সিলেক্ট করুন
                                    </button>
                                </div>
                                
                                <div id="hero-image-preview" class="mt-4 hidden">
                                    <div class="image-container relative inline-block">
                                        <img src="" alt="Preview" class="image-preview rounded-lg shadow-md cloudinary-image">
                                        <div class="image-actions absolute top-2 right-2 flex space-x-2">
                                            <button type="button" class="change-hero-image bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button type="button" class="remove-hero-image bg-red-600 text-white p-2 rounded-full hover:bg-red-700 transition">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <input type="hidden" id="hero-image-url">
                                    <input type="hidden" id="hero-image-public-id">
                                </div>
                            </div>
                            
                            <div class="flex justify-end space-x-4 pt-4">
                                <button type="button" id="reset-hero" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition">রিসেট</button>
                                <button type="submit" class="px-6 py-2 primary-bg text-white rounded-lg primary-hover transition">সেভ করুন</button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Principal Section Tab -->
                    <div id="principal-tab" class="tab-content">
                        <h2 class="text-2xl font-bold mb-6 primary-text">প্রধান শিক্ষক ম্যানেজমেন্ট</h2>
                        
                        <form id="principal-form" class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">প্রধান শিক্ষকের নাম</label>
                                    <input type="text" id="principal-name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" placeholder="প্রধান শিক্ষকের নাম">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">পদবী</label>
                                    <input type="text" id="principal-designation" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" placeholder="পদবী">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">প্রধান শিক্ষকের বার্তা</label>
                                <textarea id="principal-message" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" placeholder="প্রধান শিক্ষকের বার্তা"></textarea>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">প্রধান শিক্ষকের ছবি</label>
                                
                                <div class="mb-4">
                                    <button type="button" id="upload-principal-image" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                                        <i class="fas fa-cloud-upload-alt mr-2"></i> ক্লাউডিনারি থেকে ইমেজ সিলেক্ট করুন
                                    </button>
                                </div>
                                
                                <div id="principal-image-preview" class="mt-4 hidden">
                                    <div class="image-container relative inline-block">
                                        <img src="" alt="Preview" class="image-preview rounded-lg shadow-md cloudinary-image">
                                        <div class="image-actions absolute top-2 right-2 flex space-x-2">
                                            <button type="button" class="change-principal-image bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button type="button" class="remove-principal-image bg-red-600 text-white p-2 rounded-full hover:bg-red-700 transition">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <input type="hidden" id="principal-image-url">
                                    <input type="hidden" id="principal-image-public-id">
                                </div>
                            </div>
                            
                            <div class="flex justify-end space-x-4 pt-4">
                                <button type="button" id="reset-principal" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition">রিসেট</button>
                                <button type="submit" class="px-6 py-2 primary-bg text-white rounded-lg primary-hover transition">সেভ করুন</button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Statistics Tab -->
                    <div id="statistics-tab" class="tab-content">
                        <h2 class="text-2xl font-bold mb-6 primary-text">পরিসংখ্যান ম্যানেজমেন্ট</h2>
                        
                        <form id="statistics-form" class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">শিক্ষার্থীর সংখ্যা</label>
                                    <input type="text" id="student-count" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" placeholder="২,৫০০+">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">শিক্ষকের সংখ্যা</label>
                                    <input type="text" id="teacher-count" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" placeholder="১০০+">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ক্লাব ও কার্যক্রম</label>
                                    <input type="text" id="club-count" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" placeholder="২৫+">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">পাশের হার</label>
                                    <input type="text" id="pass-rate" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" placeholder="৯৯%">
                                </div>
                            </div>
                            
                            <div class="flex justify-end space-x-4 pt-4">
                                <button type="button" id="reset-statistics" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition">রিসেট</button>
                                <button type="submit" class="px-6 py-2 primary-bg text-white rounded-lg primary-hover transition">সেভ করুন</button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Programs Tab -->
                    <div id="programs-tab" class="tab-content">
                        <h2 class="text-2xl font-bold mb-6 primary-text">প্রোগ্রাম ম্যানেজমেন্ট</h2>
                        
                        <div class="mb-6 flex justify-between items-center">
                            <h3 class="text-xl font-semibold text-gray-700">সকল প্রোগ্রাম</h3>
                            <button id="add-program" class="px-4 py-2 primary-bg text-white rounded-lg primary-hover transition">
                                <i class="fas fa-plus mr-2"></i> নতুন প্রোগ্রাম
                            </button>
                        </div>
                        
                        <div id="programs-list" class="space-y-4 mb-8">
                            <!-- Programs will be loaded here -->
                            <div class="loader text-center py-8">
                                <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-color"></div>
                                <p class="mt-2 text-gray-500">প্রোগ্রাম লোড হচ্ছে...</p>
                            </div>
                        </div>
                        
                        <!-- Add/Edit Program Form -->
                        <div id="program-form-container" class="bg-gray-50 p-6 rounded-lg hidden">
                            <h3 class="text-xl font-semibold mb-4 primary-text" id="program-form-title">নতুন প্রোগ্রাম যোগ করুন</h3>
                            
                            <form id="program-form" class="space-y-4">
                                <input type="hidden" id="program-id">
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">প্রোগ্রাম টাইটেল</label>
                                        <input type="text" id="program-title" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" required>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">আইকন ক্লাস (FontAwesome)</label>
                                        <input type="text" id="program-icon" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" placeholder="fas fa-book" required>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">প্রোগ্রাম বর্ণনা</label>
                                    <textarea id="program-description" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" required></textarea>
                                </div>
                                
                                <div class="flex justify-end space-x-4 pt-2">
                                    <button type="button" id="cancel-program" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition">বাতিল</button>
                                    <button type="submit" class="px-6 py-2 primary-bg text-white rounded-lg primary-hover transition">সেভ করুন</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Notices Tab -->
                    <div id="notices-tab" class="tab-content">
                        <h2 class="text-2xl font-bold mb-6 primary-text">নোটিশ ম্যানেজমেন্ট</h2>
                        
                        <div class="mb-6 flex justify-between items-center">
                            <h3 class="text-xl font-semibold text-gray-700">সকল নোটিশ</h3>
                            <button id="add-notice" class="px-4 py-2 primary-bg text-white rounded-lg primary-hover transition">
                                <i class="fas fa-plus mr-2"></i> নতুন নোটিশ
                            </button>
                        </div>
                        
                        <div id="notices-list" class="space-y-4 mb-8">
                            <!-- Notices will be loaded here -->
                            <div class="loader text-center py-8">
                                <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-color"></div>
                                <p class="mt-2 text-gray-500">নোটিশ লোড হচ্ছে...</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Marquee Tab -->
                    <div id="marquee-tab" class="tab-content">
                        <h2 class="text-2xl font-bold mb-6 primary-text">স্ক্রলিং নোটিশ ম্যানেজমেন্ট</h2>
                        
                        <form id="marquee-form" class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">স্ক্রলিং নোটিশ টেক্সট</label>
                                <textarea id="marquee-text" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" placeholder="আপনার স্ক্রলিং নোটিশ টেক্সট এখানে লিখুন..."></textarea>
                                <p class="text-sm text-gray-500 mt-1">নোট: আপনি একাধিক নোটিশ যোগ করতে পারেন। প্রতিটি নোটিশের মধ্যে • • • ব্যবহার করুন</p>
                            </div>
                            
                            <div class="flex justify-end space-x-4 pt-4">
                                <button type="button" id="reset-marquee" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition">রিসেট</button>
                                <button type="submit" class="px-6 py-2 primary-bg text-white rounded-lg primary-hover transition">সেভ করুন</button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Gallery Tab -->
                    <div id="gallery-tab" class="tab-content">
                        <h2 class="text-2xl font-bold mb-6 primary-text">গ্যালারি ম্যানেজমেন্ট</h2>
                        
                        <div class="mb-6">
                            <h3 class="text-xl font-semibold text-gray-700 mb-4">গ্যালারি ইমেজ ম্যানেজমেন্ট</h3>
                            
                            <div class="flex flex-wrap gap-4 mb-6">
                                <button id="upload-gallery-images" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                                    <i class="fas fa-cloud-upload-alt mr-2"></i> নতুন ইমেজ আপলোড
                                </button>
                                <button id="refresh-gallery" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
                                    <i class="fas fa-sync-alt mr-2"></i> গ্যালারি রিফ্রেশ
                                </button>
                            </div>
                            
                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                                <div class="flex items-start">
                                    <i class="fas fa-info-circle text-yellow-500 mt-1 mr-3"></i>
                                    <div>
                                        <h4 class="font-semibold text-yellow-800">গ্যালারি ম্যানেজমেন্ট গাইড</h4>
                                        <p class="text-yellow-700 text-sm mt-1">আপনি ইমেজ আপলোড, এডিট এবং ডিলিট করতে পারবেন। প্রতিটি ইমেজের উপর হোভার করলে এডিট এবং ডিলিট বাটন দেখতে পাবেন।</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-semibold text-gray-700 mb-4">গ্যালারি ইমেজসমূহ</h3>
                            
                            <div id="gallery-images-container" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                                <!-- Gallery images will be loaded here -->
                                <div class="loader text-center py-8 col-span-2 md:col-span-3 lg:col-span-4">
                                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-color"></div>
                                    <p class="mt-2 text-gray-500">গ্যালারি ইমেজ লোড হচ্ছে...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Contact Tab -->
                    <div id="contact-tab" class="tab-content">
                        <h2 class="text-2xl font-bold mb-6 primary-text">যোগাযোগ তথ্য ম্যানেজমেন্ট</h2>
                        
                        <form id="contact-form" class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ফোন নম্বর</label>
                                    <input type="text" id="contact-phone" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" placeholder="+880 1712-345678">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ইমেইল</label>
                                    <input type="email" id="contact-email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" placeholder="info@onnorokom.edu">
                                </div>
                                
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ঠিকানা</label>
                                    <textarea id="contact-address" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" placeholder="বাড়ি #৭, রোড #৯, ধানমন্ডি, ঢাকা-১২০৫"></textarea>
                                </div>
                            </div>
                            
                            <div class="flex justify-end space-x-4 pt-4">
                                <button type="button" id="reset-contact" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition">রিসেট</button>
                                <button type="submit" class="px-6 py-2 primary-bg text-white rounded-lg primary-hover transition">সেভ করুন</button>
                            </div>
                        </form>
                    </div>
                    
                </div>
            </div>
        </div>
    </main>
    
    <!-- Notice Popup -->
    <div id="notice-popup" class="popup-overlay">
        <div class="popup-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold primary-text" id="popup-notice-title">নতুন নোটিশ যোগ করুন</h3>
                <button id="close-popup" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <form id="popup-notice-form" class="space-y-4">
                <input type="hidden" id="popup-notice-id">
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">নোটিশ টাইটেল</label>
                    <input type="text" id="popup-notice-title-input" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" required>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">তারিখ</label>
                        <input type="date" id="popup-notice-date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" required>
                    </div>
                    
                    <div class="flex items-center">
                        <input type="checkbox" id="popup-notice-isNew" class="h-4 w-4 text-primary-color focus:ring-primary-color border-gray-300 rounded">
                        <label for="popup-notice-isNew" class="ml-2 block text-sm text-gray-700">নতুন হিসেবে চিহ্নিত করুন</label>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">নোটিশ বর্ণনা</label>
                    <textarea id="popup-notice-description" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-color focus:border-transparent" required></textarea>
                </div>
                
                <div class="flex justify-end space-x-4 pt-2">
                    <button type="button" id="cancel-popup-notice" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition">বাতিল</button>
                    <button type="submit" class="px-6 py-2 primary-bg text-white rounded-lg primary-hover transition">সেভ করুন</button>
                </div>
            </form>
        </div>
    </div>
    
    <footer class="primary-bg text-white mt-12 pt-10 pb-6">
        <div class="container mx-auto px-4 text-center text-sm text-gray-400 pt-4">
            &copy; ২০২৫ ONNO ROKOM BIDDYANIKETON. সর্বস্বত্ব সংরক্ষিত।
        </div>
    </footer>

    <!-- Cloudinary Upload Widget Script -->
    <script>
        // Firebase কনফিগারেশন
        const firebaseConfig = {
            apiKey: "AIzaSyAjoRYAXQa4J43L4oLmHmUoK7ZqMKCdrxI",
            authDomain: "programme-7eb45.firebaseapp.com",
            databaseURL: "https://programme-7eb45-default-rtdb.firebaseio.com",
            projectId: "programme-7eb45",
            storageBucket: "programme-7eb45.firebasestorage.app",
            messagingSenderId: "431090813085",
            appId: "1:431090813085:web:496fc0d8bb5e57af53ec74",
            measurementId: "G-FE49VB7F1B"
        };

        // Firebase ইনিশিয়ালাইজেশন
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Cloudinary Configuration
        const cloudinaryConfig = {
            cloudName: 'dhvtgzy5x', // Replace with your cloud name
            uploadPreset: 'Rosenews' // Replace with your upload preset
        };

        // Global Variables
        let editingProgramId = null;
        let editingNoticeId = null;
        let myWidget = null;

        // DOM Content Loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeTabs();
            initializeEventListeners();
            initializeCloudinaryWidget();
            loadAllData();
        });

        // Tab Management
        function initializeTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    document.querySelectorAll('.tab-button').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Add active class to current tab and content
                    this.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
        }

        // Event Listeners
        function initializeEventListeners() {
            // Mobile menu toggle
            document.getElementById('mobile-menu-button').addEventListener('click', function() {
                document.getElementById('mobile-menu').classList.toggle('hidden');
            });
            
            // Form submissions
            document.getElementById('hero-form').addEventListener('submit', saveHeroData);
            document.getElementById('principal-form').addEventListener('submit', savePrincipalData);
            document.getElementById('statistics-form').addEventListener('submit', saveStatisticsData);
            document.getElementById('program-form').addEventListener('submit', saveProgramData);
            document.getElementById('marquee-form').addEventListener('submit', saveMarqueeData);
            document.getElementById('contact-form').addEventListener('submit', saveContactData);
            document.getElementById('popup-notice-form').addEventListener('submit', savePopupNoticeData);
            
            // Reset buttons
            document.getElementById('reset-hero').addEventListener('click', resetHeroForm);
            document.getElementById('reset-principal').addEventListener('click', resetPrincipalForm);
            document.getElementById('reset-statistics').addEventListener('click', resetStatisticsForm);
            document.getElementById('reset-marquee').addEventListener('click', resetMarqueeForm);
            document.getElementById('reset-contact').addEventListener('click', resetContactForm);
            
            // Program management
            document.getElementById('add-program').addEventListener('click', showProgramForm);
            document.getElementById('cancel-program').addEventListener('click', hideProgramForm);
            
            // Notice management
            document.getElementById('add-notice').addEventListener('click', showNoticePopup);
            
            // Popup management
            document.getElementById('close-popup').addEventListener('click', hideNoticePopup);
            document.getElementById('cancel-popup-notice').addEventListener('click', hideNoticePopup);
            
            // Gallery management
            document.getElementById('upload-gallery-images').addEventListener('click', openGalleryUploadWidget);
            document.getElementById('refresh-gallery').addEventListener('click', loadGalleryData);
            
            // Hero image management
            document.getElementById('upload-hero-image').addEventListener('click', openHeroUploadWidget);
            
            // Principal image management
            document.getElementById('upload-principal-image').addEventListener('click', openPrincipalUploadWidget);
        }

        // Cloudinary Widget Initialization
        function initializeCloudinaryWidget() {
            myWidget = cloudinary.createUploadWidget({
                cloudName: cloudinaryConfig.cloudName,
                uploadPreset: cloudinaryConfig.uploadPreset,
                multiple: true,
                maxFiles: 20,
                resourceType: 'image',
                clientAllowedFormats: ['jpg', 'jpeg', 'png', 'gif'],
                maxFileSize: 5000000, // 5MB
                showPoweredBy: false,
                language: 'bn',
                text: {
                    bn: {
                        queue: {
                            title: "আপনার ফাইলসমূহ",
                            title_uploading_with_counter: "আপলোড হচ্ছে {{num}}/{{total}}",
                            title_uploading: "আপলোড হচ্ছে",
                            mini_title: "ফাইলসমূহ",
                            mini_title_uploading_with_counter: "আপলোড হচ্ছে {{num}}/{{total}}",
                            mini_title_uploading: "আপলোড হচ্ছে"
                        },
                        uploader: {
                            browse: "ফাইল সিলেক্ট করুন",
                            drop: "ফাইলসমূহ এখানে ড্রপ করুন"
                        }
                    }
                }
            }, (error, result) => {
                if (!error && result && result.event === "success") {
                    console.log('Cloudinary upload result:', result);
                    
                    // Handle the uploaded image based on context
                    if (result.info.resource_type === 'image') {
                        const imageUrl = result.info.secure_url;
                        const publicId = result.info.public_id;
                        
                        // Check which widget was opened
                        if (document.getElementById('hero-tab').classList.contains('active')) {
                            // Hero image upload
                            updateHeroImage(imageUrl, publicId);
                        } else if (document.getElementById('principal-tab').classList.contains('active')) {
                            // Principal image upload
                            updatePrincipalImage(imageUrl, publicId);
                        } else if (document.getElementById('gallery-tab').classList.contains('active')) {
                            // Gallery image upload
                            saveGalleryImage(imageUrl, publicId);
                        }
                    }
                }
                
                if (error) {
                    console.error('Cloudinary upload error:', error);
                    alert('ইমেজ আপলোডে সমস্যা হয়েছে: ' + error.message);
                }
            });
        }

        // Open Cloudinary Widget for Hero Image
        function openHeroUploadWidget() {
            myWidget.update({
                multiple: false,
                maxFiles: 1
            });
            myWidget.open();
        }

        // Open Cloudinary Widget for Principal Image
        function openPrincipalUploadWidget() {
            myWidget.update({
                multiple: false,
                maxFiles: 1
            });
            myWidget.open();
        }

        // Open Cloudinary Widget for Gallery Images
        function openGalleryUploadWidget() {
            myWidget.update({
                multiple: true,
                maxFiles: 20
            });
            myWidget.open();
        }

        // Update Hero Image
        function updateHeroImage(imageUrl, publicId) {
            const preview = document.getElementById('hero-image-preview');
            const img = preview.querySelector('img');
            img.src = imageUrl;
            preview.classList.remove('hidden');
            
            document.getElementById('hero-image-url').value = imageUrl;
            document.getElementById('hero-image-public-id').value = publicId;
            
            // Add event listeners to action buttons
            const changeBtn = preview.querySelector('.change-hero-image');
            const removeBtn = preview.querySelector('.remove-hero-image');
            
            changeBtn.onclick = () => openHeroUploadWidget();
            removeBtn.onclick = () => removeHeroImage();
        }

        // Remove Hero Image
        function removeHeroImage() {
            const preview = document.getElementById('hero-image-preview');
            preview.classList.add('hidden');
            document.getElementById('hero-image-url').value = '';
            document.getElementById('hero-image-public-id').value = '';
        }

        // Update Principal Image
        function updatePrincipalImage(imageUrl, publicId) {
            const preview = document.getElementById('principal-image-preview');
            const img = preview.querySelector('img');
            img.src = imageUrl;
            preview.classList.remove('hidden');
            
            document.getElementById('principal-image-url').value = imageUrl;
            document.getElementById('principal-image-public-id').value = publicId;
            
            // Add event listeners to action buttons
            const changeBtn = preview.querySelector('.change-principal-image');
            const removeBtn = preview.querySelector('.remove-principal-image');
            
            changeBtn.onclick = () => openPrincipalUploadWidget();
            removeBtn.onclick = () => removePrincipalImage();
        }

        // Remove Principal Image
        function removePrincipalImage() {
            const preview = document.getElementById('principal-image-preview');
            preview.classList.add('hidden');
            document.getElementById('principal-image-url').value = '';
            document.getElementById('principal-image-public-id').value = '';
        }

        // Save Gallery Image to Firebase
        function saveGalleryImage(imageUrl, publicId) {
            const newImageRef = database.ref('gallery').push();
            newImageRef.set({
                url: imageUrl,
                publicId: publicId,
                uploadedAt: new Date().toISOString()
            }).then(() => {
                alert('ইমেজ সফলভাবে গ্যালারিতে সংরক্ষণ করা হয়েছে!');
                loadGalleryData();
            }).catch(error => {
                console.error('Error saving gallery image:', error);
                alert('ইমেজ সংরক্ষণে সমস্যা হয়েছে!');
            });
        }

        // Load All Data from Firebase
        function loadAllData() {
            loadHeroData();
            loadPrincipalData();
            loadStatisticsData();
            loadProgramsData();
            loadNoticesData();
            loadMarqueeData();
            loadGalleryData();
            loadContactData();
        }

        // Load Hero Data
        function loadHeroData() {
            database.ref('hero').once('value').then((snapshot) => {
                const heroData = snapshot.val();
                if (heroData) {
                    document.getElementById('hero-title').value = heroData.title || '';
                    document.getElementById('hero-description').value = heroData.description || '';
                    
                    if (heroData.backgroundImage) {
                        const preview = document.getElementById('hero-image-preview');
                        const img = preview.querySelector('img');
                        img.src = heroData.backgroundImage;
                        preview.classList.remove('hidden');
                        
                        document.getElementById('hero-image-url').value = heroData.backgroundImage;
                        document.getElementById('hero-image-public-id').value = heroData.publicId || '';
                        
                        // Add event listeners to action buttons
                        const changeBtn = preview.querySelector('.change-hero-image');
                        const removeBtn = preview.querySelector('.remove-hero-image');
                        
                        changeBtn.onclick = () => openHeroUploadWidget();
                        removeBtn.onclick = () => removeHeroImage();
                    }
                }
            });
        }

        // Load Principal Data
        function loadPrincipalData() {
            database.ref('principal').once('value').then((snapshot) => {
                const principalData = snapshot.val();
                if (principalData) {
                    document.getElementById('principal-name').value = principalData.name || '';
                    document.getElementById('principal-designation').value = principalData.designation || '';
                    document.getElementById('principal-message').value = principalData.message || '';
                    
                    if (principalData.image) {
                        const preview = document.getElementById('principal-image-preview');
                        const img = preview.querySelector('img');
                        img.src = principalData.image;
                        preview.classList.remove('hidden');
                        
                        document.getElementById('principal-image-url').value = principalData.image;
                        document.getElementById('principal-image-public-id').value = principalData.publicId || '';
                        
                        // Add event listeners to action buttons
                        const changeBtn = preview.querySelector('.change-principal-image');
                        const removeBtn = preview.querySelector('.remove-principal-image');
                        
                        changeBtn.onclick = () => openPrincipalUploadWidget();
                        removeBtn.onclick = () => removePrincipalImage();
                    }
                }
            });
        }

        // Load Statistics Data
        function loadStatisticsData() {
            database.ref('statistics').once('value').then((snapshot) => {
                const statsData = snapshot.val();
                if (statsData) {
                    document.getElementById('student-count').value = statsData.students || '';
                    document.getElementById('teacher-count').value = statsData.teachers || '';
                    document.getElementById('club-count').value = statsData.clubs || '';
                    document.getElementById('pass-rate').value = statsData.passRate || '';
                }
            });
        }

        // Load Programs Data
        function loadProgramsData() {
            database.ref('programs').once('value').then((snapshot) => {
                const programsData = snapshot.val();
                const programsList = document.getElementById('programs-list');
                
                if (programsData) {
                    programsList.innerHTML = '';
                    
                    Object.keys(programsData).forEach(key => {
                        const program = programsData[key];
                        const programElement = document.createElement('div');
                        programElement.className = 'bg-white p-4 rounded-lg border border-gray-200 flex justify-between items-center fade-in hover-effect';
                        programElement.innerHTML = `
                            <div>
                                <h4 class="font-semibold text-lg primary-text">${program.title}</h4>
                                <p class="text-gray-600 text-sm mt-1">${program.description}</p>
                            </div>
                            <div class="flex space-x-2">
                                <button class="edit-program px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200" data-id="${key}">
                                    <i class="fas fa-edit mr-1"></i> এডিট
                                </button>
                                <button class="delete-program px-3 py-1 bg-red-100 text-red-700 rounded text-sm hover:bg-red-200" data-id="${key}">
                                    <i class="fas fa-trash mr-1"></i> ডিলিট
                                </button>
                            </div>
                        `;
                        programsList.appendChild(programElement);
                    });
                    
                    // Add event listeners to edit and delete buttons
                    document.querySelectorAll('.edit-program').forEach(button => {
                        button.addEventListener('click', function() {
                            editProgram(this.getAttribute('data-id'));
                        });
                    });
                    
                    document.querySelectorAll('.delete-program').forEach(button => {
                        button.addEventListener('click', function() {
                            deleteProgram(this.getAttribute('data-id'));
                        });
                    });
                } else {
                    programsList.innerHTML = '<p class="text-center py-4 text-gray-500">কোন প্রোগ্রাম পাওয়া যায়নি</p>';
                }
            });
        }

        // Load Notices Data
        function loadNoticesData() {
            database.ref('notices').once('value').then((snapshot) => {
                const noticesData = snapshot.val();
                const noticesList = document.getElementById('notices-list');
                
                if (noticesData) {
                    noticesList.innerHTML = '';
                    
                    Object.keys(noticesData).forEach(key => {
                        const notice = noticesData[key];
                        const noticeElement = document.createElement('div');
                        noticeElement.className = 'bg-white p-4 rounded-lg border border-gray-200 flex justify-between items-center fade-in hover-effect';
                        noticeElement.innerHTML = `
                            <div>
                                <h4 class="font-semibold text-lg primary-text">${notice.title}</h4>
                                <p class="text-gray-600 text-sm mt-1">${notice.description}</p>
                                <p class="text-gray-500 text-xs mt-2"><i class="far fa-calendar-alt mr-1"></i> ${notice.date}</p>
                            </div>
                            <div class="flex space-x-2">
                                <button class="edit-notice px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200" data-id="${key}">
                                    <i class="fas fa-edit mr-1"></i> এডিট
                                </button>
                                <button class="delete-notice px-3 py-1 bg-red-100 text-red-700 rounded text-sm hover:bg-red-200" data-id="${key}">
                                    <i class="fas fa-trash mr-1"></i> ডিলিট
                                </button>
                            </div>
                        `;
                        noticesList.appendChild(noticeElement);
                    });
                    
                    // Add event listeners to edit and delete buttons
                    document.querySelectorAll('.edit-notice').forEach(button => {
                        button.addEventListener('click', function() {
                            editNotice(this.getAttribute('data-id'));
                        });
                    });
                    
                    document.querySelectorAll('.delete-notice').forEach(button => {
                        button.addEventListener('click', function() {
                            deleteNotice(this.getAttribute('data-id'));
                        });
                    });
                } else {
                    noticesList.innerHTML = '<p class="text-center py-4 text-gray-500">কোন নোটিশ পাওয়া যায়নি</p>';
                }
            });
        }

        // Load Marquee Data
        function loadMarqueeData() {
            database.ref('marquee').once('value').then((snapshot) => {
                const marqueeData = snapshot.val();
                if (marqueeData) {
                    document.getElementById('marquee-text').value = marqueeData.text || '';
                }
            });
        }

        // Load Gallery Data
        function loadGalleryData() {
            database.ref('gallery').once('value').then((snapshot) => {
                const galleryData = snapshot.val();
                const galleryContainer = document.getElementById('gallery-images-container');
                
                if (galleryData) {
                    galleryContainer.innerHTML = '';
                    
                    Object.keys(galleryData).forEach(key => {
                        const imageData = galleryData[key];
                        const imageElement = document.createElement('div');
                        imageElement.className = 'image-container relative group fade-in';
                        imageElement.innerHTML = `
                            <img src="${imageData.url}" alt="Gallery Image" class="w-full h-40 object-cover rounded-lg cloudinary-image">
                            <div class="image-actions absolute top-2 right-2 flex space-x-2">
                                <button class="edit-gallery-image bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition" data-id="${key}" data-public-id="${imageData.publicId}">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="delete-gallery-image bg-red-600 text-white p-2 rounded-full hover:bg-red-700 transition" data-id="${key}" data-public-id="${imageData.publicId}">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        `;
                        galleryContainer.appendChild(imageElement);
                    });
                    
                    // Add event listeners to delete buttons
                    document.querySelectorAll('.delete-gallery-image').forEach(button => {
                        button.addEventListener('click', function() {
                            deleteGalleryImage(this.getAttribute('data-id'), this.getAttribute('data-public-id'));
                        });
                    });
                    
                    // Add event listeners to edit buttons
                    document.querySelectorAll('.edit-gallery-image').forEach(button => {
                        button.addEventListener('click', function() {
                            editGalleryImage(this.getAttribute('data-id'), this.getAttribute('data-public-id'));
                        });
                    });
                } else {
                    galleryContainer.innerHTML = '<p class="text-center py-4 text-gray-500 col-span-2 md:col-span-3 lg:col-span-4">গ্যালারিতে কোন ইমেজ নেই</p>';
                }
            });
        }

        // Load Contact Data
        function loadContactData() {
            database.ref('contact').once('value').then((snapshot) => {
                const contactData = snapshot.val();
                if (contactData) {
                    document.getElementById('contact-phone').value = contactData.phone || '';
                    document.getElementById('contact-email').value = contactData.email || '';
                    document.getElementById('contact-address').value = contactData.address || '';
                }
            });
        }

        // Save Hero Data
        function saveHeroData(e) {
            e.preventDefault();
            
            const title = document.getElementById('hero-title').value;
            const description = document.getElementById('hero-description').value;
            const imageUrl = document.getElementById('hero-image-url').value;
            const publicId = document.getElementById('hero-image-public-id').value;
            
            database.ref('hero').set({
                title: title,
                description: description,
                backgroundImage: imageUrl,
                publicId: publicId
            }).then(() => {
                alert('হিরো সেকশন সফলভাবে সেভ করা হয়েছে!');
            });
        }

        // Save Principal Data
        function savePrincipalData(e) {
            e.preventDefault();
            
            const name = document.getElementById('principal-name').value;
            const designation = document.getElementById('principal-designation').value;
            const message = document.getElementById('principal-message').value;
            const imageUrl = document.getElementById('principal-image-url').value;
            const publicId = document.getElementById('principal-image-public-id').value;
            
            database.ref('principal').set({
                name: name,
                designation: designation,
                message: message,
                image: imageUrl,
                publicId: publicId
            }).then(() => {
                alert('প্রধান শিক্ষকের তথ্য সফলভাবে সেভ করা হয়েছে!');
            });
        }

        // Save Statistics Data
        function saveStatisticsData(e) {
            e.preventDefault();
            
            const students = document.getElementById('student-count').value;
            const teachers = document.getElementById('teacher-count').value;
            const clubs = document.getElementById('club-count').value;
            const passRate = document.getElementById('pass-rate').value;
            
            database.ref('statistics').set({
                students: students,
                teachers: teachers,
                clubs: clubs,
                passRate: passRate
            }).then(() => {
                alert('পরিসংখ্যান সফলভাবে সেভ করা হয়েছে!');
            });
        }

        // Save Program Data
        function saveProgramData(e) {
            e.preventDefault();
            
            const title = document.getElementById('program-title').value;
            const icon = document.getElementById('program-icon').value;
            const description = document.getElementById('program-description').value;
            
            if (editingProgramId) {
                // Update existing program
                database.ref(`programs/${editingProgramId}`).update({
                    title: title,
                    icon: icon,
                    description: description
                }).then(() => {
                    alert('প্রোগ্রাম সফলভাবে আপডেট করা হয়েছে!');
                    hideProgramForm();
                    loadProgramsData();
                    editingProgramId = null;
                });
            } else {
                // Add new program
                const newProgramRef = database.ref('programs').push();
                newProgramRef.set({
                    title: title,
                    icon: icon,
                    description: description
                }).then(() => {
                    alert('প্রোগ্রাম সফলভাবে যোগ করা হয়েছে!');
                    hideProgramForm();
                    loadProgramsData();
                });
            }
        }

        // Save Marquee Data
        function saveMarqueeData(e) {
            e.preventDefault();
            
            const text = document.getElementById('marquee-text').value;
            
            database.ref('marquee').set({
                text: text
            }).then(() => {
                alert('স্ক্রলিং নোটিশ সফলভাবে সেভ করা হয়েছে!');
            });
        }

        // Save Contact Data
        function saveContactData(e) {
            e.preventDefault();
            
            const phone = document.getElementById('contact-phone').value;
            const email = document.getElementById('contact-email').value;
            const address = document.getElementById('contact-address').value;
            
            database.ref('contact').set({
                phone: phone,
                email: email,
                address: address
            }).then(() => {
                alert('যোগাযোগ তথ্য সফলভাবে সেভ করা হয়েছে!');
            });
        }

        // Show Notice Popup
        function showNoticePopup() {
            document.getElementById('notice-popup').style.display = 'flex';
            document.getElementById('popup-notice-title').textContent = 'নতুন নোটিশ যোগ করুন';
            document.getElementById('popup-notice-id').value = '';
            editingNoticeId = null;
            
            // Set today's date as default
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('popup-notice-date').value = today;
        }

        // Hide Notice Popup
        function hideNoticePopup() {
            document.getElementById('notice-popup').style.display = 'none';
            document.getElementById('popup-notice-form').reset();
            editingNoticeId = null;
        }

        // Save Popup Notice Data
        function savePopupNoticeData(e) {
            e.preventDefault();
            
            const title = document.getElementById('popup-notice-title-input').value;
            const date = document.getElementById('popup-notice-date').value;
            const isNew = document.getElementById('popup-notice-isNew').checked;
            const description = document.getElementById('popup-notice-description').value;
            
            if (editingNoticeId) {
                // Update existing notice
                database.ref(`notices/${editingNoticeId}`).update({
                    title: title,
                    date: date,
                    isNew: isNew,
                    description: description
                }).then(() => {
                    alert('নোটিশ সফলভাবে আপডেট করা হয়েছে!');
                    hideNoticePopup();
                    loadNoticesData();
                    editingNoticeId = null;
                });
            } else {
                // Add new notice
                const newNoticeRef = database.ref('notices').push();
                newNoticeRef.set({
                    title: title,
                    date: date,
                    isNew: isNew,
                    description: description
                }).then(() => {
                    alert('নোটিশ সফলভাবে যোগ করা হয়েছে!');
                    hideNoticePopup();
                    loadNoticesData();
                });
            }
        }

        // Show Program Form
        function showProgramForm() {
            document.getElementById('program-form-container').classList.remove('hidden');
            document.getElementById('program-form-title').textContent = 'নতুন প্রোগ্রাম যোগ করুন';
            document.getElementById('program-id').value = '';
            editingProgramId = null;
            
            // Scroll to form
            document.getElementById('program-form-container').scrollIntoView({ behavior: 'smooth' });
        }

        // Hide Program Form
        function hideProgramForm() {
            document.getElementById('program-form-container').classList.add('hidden');
            document.getElementById('program-form').reset();
            editingProgramId = null;
        }

        // Edit Program
        function editProgram(programId) {
            database.ref(`programs/${programId}`).once('value').then((snapshot) => {
                const program = snapshot.val();
                if (program) {
                    document.getElementById('program-form-container').classList.remove('hidden');
                    document.getElementById('program-form-title').textContent = 'প্রোগ্রাম এডিট করুন';
                    document.getElementById('program-id').value = programId;
                    document.getElementById('program-title').value = program.title;
                    document.getElementById('program-icon').value = program.icon;
                    document.getElementById('program-description').value = program.description;
                    
                    editingProgramId = programId;
                    
                    // Scroll to form
                    document.getElementById('program-form-container').scrollIntoView({ behavior: 'smooth' });
                }
            });
        }

        // Delete Program
        function deleteProgram(programId) {
            if (confirm('আপনি কি এই প্রোগ্রাম ডিলিট করতে চান?')) {
                database.ref(`programs/${programId}`).remove().then(() => {
                    alert('প্রোগ্রাম সফলভাবে ডিলিট করা হয়েছে!');
                    loadProgramsData();
                });
            }
        }

        // Edit Notice
        function editNotice(noticeId) {
            database.ref(`notices/${noticeId}`).once('value').then((snapshot) => {
                const notice = snapshot.val();
                if (notice) {
                    document.getElementById('notice-popup').style.display = 'flex';
                    document.getElementById('popup-notice-title').textContent = 'নোটিশ এডিট করুন';
                    document.getElementById('popup-notice-id').value = noticeId;
                    document.getElementById('popup-notice-title-input').value = notice.title;
                    document.getElementById('popup-notice-date').value = notice.date;
                    document.getElementById('popup-notice-isNew').checked = notice.isNew || false;
                    document.getElementById('popup-notice-description').value = notice.description;
                    
                    editingNoticeId = noticeId;
                }
            });
        }

        // Delete Notice
        function deleteNotice(noticeId) {
            if (confirm('আপনি কি এই নোটিশ ডিলিট করতে চান?')) {
                database.ref(`notices/${noticeId}`).remove().then(() => {
                    alert('নোটিশ সফলভাবে ডিলিট করা হয়েছে!');
                    loadNoticesData();
                });
            }
        }

        // Delete Gallery Image
        function deleteGalleryImage(imageId, publicId) {
            if (confirm('আপনি কি এই ইমেজ ডিলিট করতে চান?')) {
                // Delete from Firebase
                database.ref(`gallery/${imageId}`).remove().then(() => {
                    alert('ইমেজ সফলভাবে ডিলিট করা হয়েছে!');
                    loadGalleryData();
                    
                    // Note: In a real implementation, you would also delete from Cloudinary
                    // using the Cloudinary Admin API with the publicId
                    console.log('Image deleted from Firebase. Public ID for Cloudinary deletion:', publicId);
                });
            }
        }

        // Edit Gallery Image (Replace with new image)
        function editGalleryImage(imageId, publicId) {
            if (confirm('আপনি কি এই ইমেজ রিপ্লেস করতে চান?')) {
                // Open Cloudinary widget for replacement
                myWidget.update({
                    multiple: false,
                    maxFiles: 1
                });
                
                // Store the current image ID for replacement
                myWidget.open();
                
                // Set up a one-time event listener for the upload completion
                const handleUploadComplete = (error, result) => {
                    if (!error && result && result.event === "success") {
                        const newImageUrl = result.info.secure_url;
                        const newPublicId = result.info.public_id;
                        
                        // Update the image in Firebase
                        database.ref(`gallery/${imageId}`).update({
                            url: newImageUrl,
                            publicId: newPublicId,
                            updatedAt: new Date().toISOString()
                        }).then(() => {
                            alert('ইমেজ সফলভাবে রিপ্লেস করা হয়েছে!');
                            loadGalleryData();
                            
                            // Note: In a real implementation, you would also delete the old image from Cloudinary
                            // using the Cloudinary Admin API with the old publicId
                            console.log('Old image public ID for deletion:', publicId);
                        });
                        
                        // Remove the event listener
                        myWidget.close();
                    }
                };
                
                // Temporarily replace the widget callback
                const originalCallback = myWidget._options.callback;
                myWidget.update({ callback: handleUploadComplete });
                
                // Restore original callback after operation
                setTimeout(() => {
                    myWidget.update({ callback: originalCallback });
                }, 5000);
            }
        }

        // Reset Forms
        function resetHeroForm() {
            document.getElementById('hero-form').reset();
            document.getElementById('hero-image-preview').classList.add('hidden');
            document.getElementById('hero-image-url').value = '';
            document.getElementById('hero-image-public-id').value = '';
        }

        function resetPrincipalForm() {
            document.getElementById('principal-form').reset();
            document.getElementById('principal-image-preview').classList.add('hidden');
            document.getElementById('principal-image-url').value = '';
            document.getElementById('principal-image-public-id').value = '';
        }

        function resetStatisticsForm() {
            document.getElementById('statistics-form').reset();
        }

        function resetMarqueeForm() {
            document.getElementById('marquee-form').reset();
        }

        function resetContactForm() {
            document.getElementById('contact-form').reset();
        }
    </script>
</body>
</html>